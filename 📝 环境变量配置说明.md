# ðŸ“ çŽ¯å¢ƒå˜é‡é…ç½®è¯´æ˜Ž

## ðŸŽ¯ éœ€è¦æ›´æ–°åˆçº¦åœ°å€çš„åœ°æ–¹

### âœ… æ–°éƒ¨ç½²çš„åˆçº¦åœ°å€
```
0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9
```

---

## 1ï¸âƒ£ åŽç«¯çŽ¯å¢ƒå˜é‡

**æ–‡ä»¶**: `backend/.env`

**åˆ›å»ºæ–¹æ³•**:
```bash
cd backend
# åˆ›å»º .env æ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹
```

**å†…å®¹**:
```env
# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_PORT=3306
DB_NAME=supply_chain_finance
DB_USER=root
DB_PASSWORD=your_password

# JWTå¯†é’¥
JWT_SECRET=your_jwt_secret_key_here_please_change_in_production

# æœåŠ¡å™¨ç«¯å£
PORT=5000

# åŒºå—é“¾é…ç½® â­ é‡ç‚¹
RPC_URL=http://127.0.0.1:8545
CONTRACT_ADDRESS=0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9
PRIVATE_KEY=0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80

# APIé…ç½®
NODE_ENV=development
```

**è¯´æ˜Ž**:
- `CONTRACT_ADDRESS`: â­ æ–°éƒ¨ç½²çš„åˆçº¦åœ°å€
- `PRIVATE_KEY`: åŽç«¯ç”¨äºŽè°ƒç”¨åˆçº¦çš„ç§é’¥ (Hardhatè´¦æˆ·#0)
- `RPC_URL`: Hardhatæœ¬åœ°èŠ‚ç‚¹åœ°å€

---

## 2ï¸âƒ£ å‰ç«¯çŽ¯å¢ƒå˜é‡

**æ–‡ä»¶**: `frontend/.env` æˆ– `frontend/.env.local`

**åˆ›å»ºæ–¹æ³•**:
```bash
cd frontend
# åˆ›å»º .env.local æ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹
```

**å†…å®¹**:
```env
# åˆçº¦åœ°å€ â­ é‡ç‚¹
VITE_CONTRACT_ADDRESS=0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9

# åŽç«¯APIåœ°å€
VITE_API_BASE_URL=http://localhost:5000/api
```

**è¯´æ˜Ž**:
- `VITE_CONTRACT_ADDRESS`: â­ æ–°éƒ¨ç½²çš„åˆçº¦åœ°å€ (å‰ç«¯MetaMaskè°ƒç”¨)
- `VITE_API_BASE_URL`: åŽç«¯APIåœ°å€

---

## 3ï¸âƒ£ å‰ç«¯åˆçº¦æœåŠ¡ (å·²è‡ªåŠ¨é…ç½®é»˜è®¤å€¼)

**æ–‡ä»¶**: `frontend/src/services/contract.ts`

**å½“å‰ä»£ç **:
```typescript
const CONTRACT_ADDRESS = import.meta.env.VITE_CONTRACT_ADDRESS || '0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512';
```

**è¯´æ˜Ž**:
- å¦‚æžœè®¾ç½®äº†çŽ¯å¢ƒå˜é‡ `VITE_CONTRACT_ADDRESS`ï¼Œåˆ™ä½¿ç”¨çŽ¯å¢ƒå˜é‡
- å¦åˆ™ä½¿ç”¨é»˜è®¤å€¼
- â­ **å»ºè®®**: åˆ›å»º `.env.local` æ–‡ä»¶è®¾ç½®æ­£ç¡®çš„åœ°å€

---

## 4ï¸âƒ£ Hardhatæµ‹è¯•è´¦æˆ·ç§é’¥

**ç”¨é€”**: åŽç«¯è°ƒç”¨åˆçº¦éœ€è¦ç­¾å

**Hardhaté»˜è®¤è´¦æˆ·**:
```
Account #0: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 (10000 ETH)
Private Key: 0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80

Account #1: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 (10000 ETH)
Private Key: 0x59c6995e998f97a5a0044966f0945389dc9e86dae88c7a8412f4603b6b78690d

Account #2: 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC (10000 ETH)
Private Key: 0x5de4111afa1a4b94908f83103eb1f1706367c2e68ca870fc3fb9a804cdab365a
```

**é…ç½®åˆ°åŽç«¯**:
```env
PRIVATE_KEY=0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80
```

---

## 5ï¸âƒ£ MetaMaské…ç½® (å‰ç«¯ç”¨æˆ·)

**ç½‘ç»œé…ç½®**:
```
ç½‘ç»œåç§°: Hardhat Local
RPC URL: http://127.0.0.1:8545
Chain ID: 31337
è´§å¸ç¬¦å·: ETH
```

**å¯¼å…¥æµ‹è¯•è´¦æˆ·**:
1. æ‰“å¼€MetaMask
2. å¯¼å…¥è´¦æˆ· -> è¾“å…¥ç§é’¥
3. ä½¿ç”¨ä¸Šé¢çš„ Account #1, #2, #3 ç­‰

**å»ºè®®åˆ†é…**:
- Account #0: åŽç«¯æœåŠ¡è´¦æˆ· (ä¸å¯¼å…¥MetaMask)
- Account #1: æ ¸å¿ƒä¼ä¸šæµ‹è¯•è´¦æˆ·
- Account #2: ä¾›åº”å•†æµ‹è¯•è´¦æˆ·
- Account #3: é‡‘èžæœºæž„æµ‹è¯•è´¦æˆ·

---

## ðŸ“‹ é…ç½®æ£€æŸ¥æ¸…å•

### åŽç«¯é…ç½®
- [ ] åˆ›å»º `backend/.env` æ–‡ä»¶
- [ ] è®¾ç½® `CONTRACT_ADDRESS=0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9`
- [ ] è®¾ç½® `PRIVATE_KEY` (Hardhat Account #0)
- [ ] è®¾ç½®æ•°æ®åº“è¿žæŽ¥ä¿¡æ¯
- [ ] è®¾ç½® JWT_SECRET

### å‰ç«¯é…ç½®
- [ ] åˆ›å»º `frontend/.env.local` æ–‡ä»¶
- [ ] è®¾ç½® `VITE_CONTRACT_ADDRESS=0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9`
- [ ] è®¾ç½® `VITE_API_BASE_URL=http://localhost:5000/api`

### MetaMaské…ç½®
- [ ] æ·»åŠ  Hardhat Local ç½‘ç»œ
- [ ] å¯¼å…¥æµ‹è¯•è´¦æˆ· (Account #1, #2, #3)

### æœåŠ¡å¯åŠ¨
- [ ] å¯åŠ¨ Hardhat èŠ‚ç‚¹: `cd contracts && npx hardhat node`
- [ ] å¯åŠ¨åŽç«¯: `cd backend && npm run dev`
- [ ] å¯åŠ¨å‰ç«¯: `cd frontend && npm run dev`

---

## ðŸ§ª éªŒè¯é…ç½®

### 1. éªŒè¯åŽç«¯è¿žæŽ¥åˆçº¦
```bash
cd backend
node -e "
const { ethers } = require('ethers');
require('dotenv').config();
const provider = new ethers.JsonRpcProvider(process.env.RPC_URL);
provider.getCode(process.env.CONTRACT_ADDRESS).then(code => {
  console.log('åˆçº¦ä»£ç é•¿åº¦:', code.length);
  console.log('é…ç½®æ­£ç¡®!');
});
"
```

### 2. éªŒè¯å‰ç«¯çŽ¯å¢ƒå˜é‡
```bash
cd frontend
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨åŽï¼Œåœ¨æµè§ˆå™¨æŽ§åˆ¶å°è¿è¡Œ:
console.log('åˆçº¦åœ°å€:', import.meta.env.VITE_CONTRACT_ADDRESS);
```

---

## âš ï¸ é‡è¦æç¤º

### å®‰å…¨æ€§
- âš ï¸ **ç”Ÿäº§çŽ¯å¢ƒ**: ç»å¯¹ä¸è¦ä½¿ç”¨Hardhaté»˜è®¤ç§é’¥ï¼
- âš ï¸ **ç”Ÿäº§çŽ¯å¢ƒ**: ä½¿ç”¨å¼ºå¯†ç å’Œå®‰å…¨çš„ç§é’¥ç®¡ç†
- âš ï¸ `.env` æ–‡ä»¶å·²åœ¨ `.gitignore` ä¸­ï¼Œä¸ä¼šæäº¤åˆ°git

### ç½‘ç»œåˆ‡æ¢
- æœ¬åœ°å¼€å‘: `http://127.0.0.1:8545` (Hardhat)
- æµ‹è¯•ç½‘: éœ€è¦æ›´æ”¹ RPC_URL å’Œ CONTRACT_ADDRESS
- ä¸»ç½‘: éœ€è¦æ›´æ”¹ RPC_URLã€CONTRACT_ADDRESS å’Œ PRIVATE_KEY

---

## ðŸš€ å¿«é€Ÿå¼€å§‹

### ä¸€é”®é…ç½®è„šæœ¬

**Linux/Mac**: åˆ›å»º `setup-env.sh`
```bash
#!/bin/bash

# åŽç«¯çŽ¯å¢ƒå˜é‡
cat > backend/.env << EOF
DB_HOST=localhost
DB_PORT=3306
DB_NAME=supply_chain_finance
DB_USER=root
DB_PASSWORD=your_password
JWT_SECRET=your_jwt_secret_key_here
PORT=5000
RPC_URL=http://127.0.0.1:8545
CONTRACT_ADDRESS=0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9
PRIVATE_KEY=0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80
NODE_ENV=development
EOF

# å‰ç«¯çŽ¯å¢ƒå˜é‡
cat > frontend/.env.local << EOF
VITE_CONTRACT_ADDRESS=0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9
VITE_API_BASE_URL=http://localhost:5000/api
EOF

echo "âœ… çŽ¯å¢ƒå˜é‡é…ç½®å®Œæˆï¼"
```

**Windows PowerShell**: åˆ›å»º `setup-env.ps1`
```powershell
# åŽç«¯çŽ¯å¢ƒå˜é‡
@"
DB_HOST=localhost
DB_PORT=3306
DB_NAME=supply_chain_finance
DB_USER=root
DB_PASSWORD=your_password
JWT_SECRET=your_jwt_secret_key_here
PORT=5000
RPC_URL=http://127.0.0.1:8545
CONTRACT_ADDRESS=0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9
PRIVATE_KEY=0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80
NODE_ENV=development
"@ | Out-File -FilePath backend\.env -Encoding UTF8

# å‰ç«¯çŽ¯å¢ƒå˜é‡
@"
VITE_CONTRACT_ADDRESS=0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9
VITE_API_BASE_URL=http://localhost:5000/api
"@ | Out-File -FilePath frontend\.env.local -Encoding UTF8

Write-Host "âœ… çŽ¯å¢ƒå˜é‡é…ç½®å®Œæˆï¼"
```

**è¿è¡Œ**:
```bash
# Linux/Mac
chmod +x setup-env.sh
./setup-env.sh

# Windows
.\setup-env.ps1
```

---

**é…ç½®å®ŒæˆåŽï¼ŒæŒ‰ç…§ ðŸ“‹ é…ç½®æ£€æŸ¥æ¸…å• éªŒè¯æ‰€æœ‰é¡¹ç›®ï¼** âœ…

